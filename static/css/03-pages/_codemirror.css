/* Your custom theme */
.cm-s-mytheme.CodeMirror {
    width: 100%;
    height: 100%;
    color: var(--text-primary);
    background-color: var(--card-bg);
    font-family: var(--font-family-mono);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);

}

/* Line numbers */
.cm-s-mytheme .CodeMirror-linenumber {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    padding: 0 var(--spacing-2);
}

.cm-s-mytheme .CodeMirror-gutters {
    background-color: var(--page-bg);
    border-right: 1px solid var(--border-light);
}

/* Cursor */
.cm-s-mytheme .CodeMirror-cursor {
    border-left: 2px solid var(--color-primary-200);
}

/* Active line */
.cm-s-mytheme .CodeMirror-activeline-background {
    background-color: var(--page-bg)
}

/* Matching brackets */
.cm-s-mytheme .CodeMirror-matchingbracket {
    color: var(--editor-coral) !important;
    background: rgba(254, 188, 153, 0.2); /* var(--editor-peach) with transparency */
    font-weight: bold;
    border-radius: var(--radius-base);
}

/* Markdown headers */
.cm-s-mytheme span.cm-header {
    color: var(--editor-pink);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-lg);
}

/* Bold text */
.cm-s-mytheme span.cm-strong {
    color: var(--text-primary);
    font-weight: var(--font-weight-bold);
    background: rgba(254, 188, 153, 0.15); /* var(--editor-peach) subtle highlight */
    border-radius: var(--radius-sm);
}

/* Italic text */
.cm-s-mytheme span.cm-em {
    color: var(--editor-teal);
    font-style: italic;
}

/* Code blocks and inline code */
.cm-s-mytheme span.cm-comment {
    color: var(--color-tertiary-600);
    background: var(--editor-light-bg);
    font-family: var(--font-family-mono);
    border-radius: var(--radius-base);
    padding: var(--spacing-0-5) var(--spacing-1);
}

/* Links */
.cm-s-mytheme span.cm-link {
    color: var(--editor-teal);
    text-decoration: underline;
}

/* Fenced code blocks */
.cm-s-mytheme span.cm-string {
    color: var(--color-tertiary-700);
    background: rgba(106, 204, 191, 0.1); /* var(--editor-teal) with transparency */
    border-radius: var(--radius-base);
}

/* Lists and bullets */
.cm-s-mytheme span.cm-variable-2 {
    color: var(--editor-coral);
    font-weight: var(--font-weight-medium);
}

/* Quote blocks */
.cm-s-mytheme span.cm-quote {
    color: var(--color-tertiary-500);
    font-style: italic;
    border-left: 3px solid var(--editor-peach);
    padding-left: var(--spacing-2);
}

/* Keywords and special markdown syntax */
.cm-s-mytheme span.cm-keyword {
    color: var(--editor-coral);
    font-weight: var(--font-weight-medium);
}

/* Selection */
.cm-s-mytheme .CodeMirror-selected {
    background: var(--editor-selection)
}

/* Search highlight */
.cm-s-mytheme .CodeMirror-searching {
    background: rgba(254, 188, 153, 0.4); /* var(--editor-peach) for search */
}

/* Scrollbar styling */
.cm-s-mytheme.CodeMirror ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.cm-s-mytheme.CodeMirror ::-webkit-scrollbar-thumb {
    background-color: var(--color-primary-300);
    border-radius: 4px;
}

.cm-s-mytheme.CodeMirror ::-webkit-scrollbar-track {
    background-color: var(--page-bg);
}

/* Firefox scrollbar */
.cm-s-mytheme.CodeMirror {
    scrollbar-width: thin;
    scrollbar-color: var(--color-primary-300) var(--page-bg);
}

/* Custom Toolbars */
.formatting-toolbar,
.search-toolbar {
    display : flex;
    align-items: center;
    justify-content: center ;
    border-top: 0.2px solid var(--border-light);
    border-bottom : 0.2px solid var(--border-light);
}

.search-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-top: 0.2px solid var(--border-light);
    border-bottom: 0.2px solid var(--border-light);
}

.search-controls {
    display: flex;
    align-items: center;
    width: 100%;
}

.search-inputs {
    display: flex;
    align-items: center;
    flex-grow: 1;
}

.search-buttons {
    display: flex;
    align-items: center;
}

.formatting-toolbar button,
.search-toolbar button {
    background : transparent;
    border : none;
    width: 30px;
    height: 30px    ;

    display: flex;
    align-items: center;
    justify-content: center;

    margin : 0;

    color: var(--text-primary);
    border-right: 0.1px solid var(--border-light);
}
    
.formatting-toolbar button svg,
.search-toolbar button svg {
    width: 13px;
    height: 13px;
    color: inherit;
    fill: currentColor;
    stroke: currentColor;


}

.formatting-toolbar button:hover,
.search-toolbar button:hover {
    background: var(--color-primary-300);
}

.formatting-toolbar button:active,
.search-toolbar button:active {
    background: var(--color-primary-200);
}

.search-controls {
    display: flex;
    align-items: left;
    gap: var(--spacing-1);
    flex-wrap: wrap;
}

.search-toolbar input {
    height: 30px;
    background: var(--card-bg);
    border: none;
    padding: 0;
    margin: 0;
    color: var(--text-primary);
    font-size: var(--font-size-xs);


    min-width: 150px;

    text-indent: var(--spacing-1);
    border-right: 0.2px solid var(--border-light);
    flex-grow: 1;
}

.search-toolbar input:focus {
    outline: none;
}

.search-toolbar input::placeholder {
    color: var(--text-secondary);
}

/* Dialog styling for search highlights */
.cm-s-mytheme .CodeMirror-dialog {
    position: absolute;
    top: var(--spacing-4);
    left: 50%;
    transform: translateX(-50%);
    background: var(--card-bg);
    color: var(--text-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-base);
    box-shadow: var(--shadow-md);
    padding: var(--spacing-2) var(--spacing-3);
    z-index: 100;
}

/* Live Preview Specific Styles */
.cm-s-mytheme .hidden-line {
    color: transparent !important;
    background: transparent !important;
}

.cm-s-mytheme .hidden-line * {
    color: transparent !important;
}

.cm-s-mytheme .markdown-line-widget {
    font-family: var(--font-family-body) !important;
    line-height: var(--line-height-relaxed) !important;
}

.cm-s-mytheme .markdown-rendered {
    background: rgba(106, 204, 191, 0.05);
    border-left: 2px solid transparent;
}

.cm-s-mytheme .markdown-editing {
    background: rgba(254, 188, 153, 0.1);
    border-left: 3px solid var(--editor-peach);
    padding-left: var(--spacing-sm);
}

/* Widget styling */
.cm-s-mytheme .CodeMirror-linewidget {
    overflow: visible !important;
}

.markdown-line-widget h1,
.markdown-line-widget h2,
.markdown-line-widget h3,
.markdown-line-widget h4,
.markdown-line-widget h5,
.markdown-line-widget h6 {
    margin: 0 !important;
    padding: 2px 0 !important;
}

.markdown-line-widget p {
    margin: 0 !important;
    padding: 2px 0 !important;
}

.markdown-line-widget li {
    margin: 0 !important;
    padding: 0 !important;
    list-style-position: inside;
}

.markdown-line-widget blockquote {
    margin: 0 !important;
    padding: 4px 12px !important;
}